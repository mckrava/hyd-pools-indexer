module.exports = class Data1729007144957 {
    name = 'Data1729007144957'

    async up(db) {
        await db.query(`CREATE TABLE "omnipool_asset_historical_volume" ("id" character varying NOT NULL, "asset_a_id" integer NOT NULL, "asset_b_id" integer NOT NULL, "asset_a_volume_in" numeric NOT NULL, "asset_a_volume_out" numeric NOT NULL, "asset_a_total_volume_in" numeric NOT NULL, "asset_a_total_volume_out" numeric NOT NULL, "asset_a_fee" numeric NOT NULL, "asset_b_fee" numeric NOT NULL, "asset_a_total_fees" numeric NOT NULL, "asset_b_total_fees" numeric NOT NULL, "asset_b_volume_in" numeric NOT NULL, "asset_b_volume_out" numeric NOT NULL, "asset_b_total_volume_in" numeric NOT NULL, "asset_b_total_volume_out" numeric NOT NULL, "relay_chain_block_height" integer NOT NULL, "para_chain_block_height" integer NOT NULL, "omnipool_asset_id" character varying, CONSTRAINT "PK_efc26ded1992610120cfc32ccd0" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_bd38a4d45e2696e5474a79d9f1" ON "omnipool_asset_historical_volume" ("omnipool_asset_id") `)
        await db.query(`CREATE INDEX "IDX_bfe509f7842564d72b4ceb915b" ON "omnipool_asset_historical_volume" ("para_chain_block_height") `)
        await db.query(`CREATE TABLE "omnipool_asset_operation" ("id" character varying NOT NULL, "extrinsic_hash" text, "asset_in_id" integer NOT NULL, "asset_in_amount" numeric NOT NULL, "asset_in_fee" numeric NOT NULL, "asset_out_id" integer NOT NULL, "asset_out_amount" numeric NOT NULL, "asset_out_fee" numeric NOT NULL, "protocol_fee" numeric NOT NULL, "type" character varying(4) NOT NULL, "relay_chain_block_height" integer NOT NULL, "para_chain_block_height" integer NOT NULL, "account_id" character varying, "omnipool_asset_id" character varying, CONSTRAINT "PK_d6855890b4eeeb77071adf91602" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_786f6c826ebf8c5f4620a3e354" ON "omnipool_asset_operation" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_6ed02c154a94baee4adefdea44" ON "omnipool_asset_operation" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_1e1db87f00864c9ea1dc08982d" ON "omnipool_asset_operation" ("omnipool_asset_id") `)
        await db.query(`CREATE INDEX "IDX_63a05951f253dc748c75a2dd2f" ON "omnipool_asset_operation" ("para_chain_block_height") `)
        await db.query(`CREATE TABLE "omnipool_asset" ("id" character varying NOT NULL, "asset_id" integer NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "created_at_para_block" integer NOT NULL, "is_removed" boolean, "removed_at_para_block" integer, "pool_id" character varying, CONSTRAINT "PK_6e3b9f3836fa6616f083b5ea75b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_eee49a5571d9d7e3fbe7757f13" ON "omnipool_asset" ("asset_id") `)
        await db.query(`CREATE INDEX "IDX_530f27607e7d82575c5c337d65" ON "omnipool_asset" ("pool_id") `)
        await db.query(`CREATE TABLE "omnipool" ("id" character varying NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "created_at_para_block" integer NOT NULL, "is_destroyed" boolean, "destroyed_at_para_block" integer, "account_id" character varying, CONSTRAINT "PK_a8cb656c84202ef41ea88bfb28a" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_5002156ed9c2252be6917d6211" ON "omnipool" ("account_id") `)
        await db.query(`CREATE TABLE "omnipool_asset_historical_data" ("id" character varying NOT NULL, "asset_id" integer NOT NULL, "asset_balance" numeric NOT NULL, "native_asset_balance" numeric NOT NULL, "hub_reserve_balance" numeric NOT NULL, "shares_balance" numeric NOT NULL, "relay_chain_block_height" integer NOT NULL, "para_chain_block_height" integer NOT NULL, "omnipool_asset_id" character varying, CONSTRAINT "PK_49ede7b5602a9b88c1c07ca0cd9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c70f037aafc69337fea749efa6" ON "omnipool_asset_historical_data" ("omnipool_asset_id") `)
        await db.query(`CREATE INDEX "IDX_f8c9eddb6bfddb6f94cc0b1636" ON "omnipool_asset_historical_data" ("asset_id") `)
        await db.query(`CREATE INDEX "IDX_a2f4a9bde9a39b5a27c19f090d" ON "omnipool_asset_historical_data" ("para_chain_block_height") `)
        await db.query(`CREATE INDEX "IDX_1bc0c102a97ce1c2150bf12b03" ON "lbp_pool_historical_price" ("para_chain_block_height") `)
        await db.query(`CREATE INDEX "IDX_58d646eae198679c25fb0d7952" ON "lbp_pool_historical_volume" ("para_chain_block_height") `)
        await db.query(`CREATE INDEX "IDX_dda2b654183af49040e42c0501" ON "lbp_pool_operation" ("para_chain_block_height") `)
        await db.query(`CREATE INDEX "IDX_58421b3f9a783b9daf2f62b480" ON "lbp_pool" ("asset_a_id") `)
        await db.query(`CREATE INDEX "IDX_3ff30d78c0a02affaa320bf74c" ON "lbp_pool" ("asset_b_id") `)
        await db.query(`CREATE INDEX "IDX_34b9df9f5cc1f1b9360969646c" ON "xyk_pool_historical_price" ("para_chain_block_height") `)
        await db.query(`CREATE INDEX "IDX_917131dced4184383b786f1c3b" ON "xyk_pool_historical_volume" ("para_chain_block_height") `)
        await db.query(`CREATE INDEX "IDX_0985892362b93f6895538f9171" ON "xyk_pool_operation" ("para_chain_block_height") `)
        await db.query(`CREATE INDEX "IDX_3d4236925353865ae75d838255" ON "xyk_pool" ("asset_a_id") `)
        await db.query(`CREATE INDEX "IDX_bf48afc165d389bd567bb100ac" ON "xyk_pool" ("asset_b_id") `)
        await db.query(`CREATE INDEX "IDX_7cb0b020dcebaad695ed2ae044" ON "historical_asset_volume" ("asset_id") `)
        await db.query(`CREATE INDEX "IDX_8e2e52f622baa36e7116e386f9" ON "historical_asset_volume" ("para_chain_block_height") `)
        await db.query(`ALTER TABLE "omnipool_asset_historical_volume" ADD CONSTRAINT "FK_bd38a4d45e2696e5474a79d9f1d" FOREIGN KEY ("omnipool_asset_id") REFERENCES "omnipool_asset"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "omnipool_asset_operation" ADD CONSTRAINT "FK_786f6c826ebf8c5f4620a3e3544" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "omnipool_asset_operation" ADD CONSTRAINT "FK_1e1db87f00864c9ea1dc08982d9" FOREIGN KEY ("omnipool_asset_id") REFERENCES "omnipool_asset"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "omnipool_asset" ADD CONSTRAINT "FK_530f27607e7d82575c5c337d65c" FOREIGN KEY ("pool_id") REFERENCES "omnipool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "omnipool" ADD CONSTRAINT "FK_5002156ed9c2252be6917d62118" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "omnipool_asset_historical_data" ADD CONSTRAINT "FK_c70f037aafc69337fea749efa67" FOREIGN KEY ("omnipool_asset_id") REFERENCES "omnipool_asset"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "omnipool_asset_historical_volume"`)
        await db.query(`DROP INDEX "public"."IDX_bd38a4d45e2696e5474a79d9f1"`)
        await db.query(`DROP INDEX "public"."IDX_bfe509f7842564d72b4ceb915b"`)
        await db.query(`DROP TABLE "omnipool_asset_operation"`)
        await db.query(`DROP INDEX "public"."IDX_786f6c826ebf8c5f4620a3e354"`)
        await db.query(`DROP INDEX "public"."IDX_6ed02c154a94baee4adefdea44"`)
        await db.query(`DROP INDEX "public"."IDX_1e1db87f00864c9ea1dc08982d"`)
        await db.query(`DROP INDEX "public"."IDX_63a05951f253dc748c75a2dd2f"`)
        await db.query(`DROP TABLE "omnipool_asset"`)
        await db.query(`DROP INDEX "public"."IDX_eee49a5571d9d7e3fbe7757f13"`)
        await db.query(`DROP INDEX "public"."IDX_530f27607e7d82575c5c337d65"`)
        await db.query(`DROP TABLE "omnipool"`)
        await db.query(`DROP INDEX "public"."IDX_5002156ed9c2252be6917d6211"`)
        await db.query(`DROP TABLE "omnipool_asset_historical_data"`)
        await db.query(`DROP INDEX "public"."IDX_c70f037aafc69337fea749efa6"`)
        await db.query(`DROP INDEX "public"."IDX_f8c9eddb6bfddb6f94cc0b1636"`)
        await db.query(`DROP INDEX "public"."IDX_a2f4a9bde9a39b5a27c19f090d"`)
        await db.query(`DROP INDEX "public"."IDX_1bc0c102a97ce1c2150bf12b03"`)
        await db.query(`DROP INDEX "public"."IDX_58d646eae198679c25fb0d7952"`)
        await db.query(`DROP INDEX "public"."IDX_dda2b654183af49040e42c0501"`)
        await db.query(`DROP INDEX "public"."IDX_58421b3f9a783b9daf2f62b480"`)
        await db.query(`DROP INDEX "public"."IDX_3ff30d78c0a02affaa320bf74c"`)
        await db.query(`DROP INDEX "public"."IDX_34b9df9f5cc1f1b9360969646c"`)
        await db.query(`DROP INDEX "public"."IDX_917131dced4184383b786f1c3b"`)
        await db.query(`DROP INDEX "public"."IDX_0985892362b93f6895538f9171"`)
        await db.query(`DROP INDEX "public"."IDX_3d4236925353865ae75d838255"`)
        await db.query(`DROP INDEX "public"."IDX_bf48afc165d389bd567bb100ac"`)
        await db.query(`DROP INDEX "public"."IDX_7cb0b020dcebaad695ed2ae044"`)
        await db.query(`DROP INDEX "public"."IDX_8e2e52f622baa36e7116e386f9"`)
        await db.query(`ALTER TABLE "omnipool_asset_historical_volume" DROP CONSTRAINT "FK_bd38a4d45e2696e5474a79d9f1d"`)
        await db.query(`ALTER TABLE "omnipool_asset_operation" DROP CONSTRAINT "FK_786f6c826ebf8c5f4620a3e3544"`)
        await db.query(`ALTER TABLE "omnipool_asset_operation" DROP CONSTRAINT "FK_1e1db87f00864c9ea1dc08982d9"`)
        await db.query(`ALTER TABLE "omnipool_asset" DROP CONSTRAINT "FK_530f27607e7d82575c5c337d65c"`)
        await db.query(`ALTER TABLE "omnipool" DROP CONSTRAINT "FK_5002156ed9c2252be6917d62118"`)
        await db.query(`ALTER TABLE "omnipool_asset_historical_data" DROP CONSTRAINT "FK_c70f037aafc69337fea749efa67"`)
    }
}
